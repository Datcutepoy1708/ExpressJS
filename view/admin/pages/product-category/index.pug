extends ../../layout/default.pug
include ../../mixins/filter-status.pug 
include ../../mixins/search.pug
include ../../mixins/pagination.pug
include ../../mixins/form-change-multi.pug
include ../../mixins/sort-category.pug
include ../../mixins/table-tree.pug
include ../../mixins/moment.pug

block main
  if(role.permissions.includes("product-category_view")) 
    h1 Danh mục sản phẩm

    .card.mb-3 
      .card-header Bộ lọc và tìm kiếm
      .card-body
        .row 
          .col-6 
            +filter-status(filterStatus)
          .col-6 
            +search(keyword)
    
    .card.mb-3 
      .card-header Danh sách
      .card-body
        .row 
          .col-8
            +form-change-multi(`${prefixAdmin}/product-category/change-multi-category?_method=PATCH`)
          .col-4
            if(role.permissions.includes("product-category_create"))
              a(
                href=`${prefixAdmin}/product-category/create`
                class="btn btn-outline-success"
              ) + Thêm mới

    .card.mb-3 
      .card-header 
      .card-body 
        .row 
          .col-4 
            +sort-category()  
        table.table.table-hover.table-sm(checkbox-multi)
          thead
            tr
              th
                input(type="checkbox" name="checkall")
              th STT
              th Hình ảnh
              th Tiêu đề
              th Vị trí
              th Trạng thái
              th Người tạo
              th Chỉnh sửa
              th Hành động
          tbody
            +table-tree(records)

    //- Form delete đặt ở đây, ngoài table
    form#form-delete-item(
      action=""
      method="POST"
      data-path=`${prefixAdmin}/product-category/delete`
    )

    //- Scripts
    script(src="/admin/js/script.js")   
    script(src="/admin/js/product-category.js")