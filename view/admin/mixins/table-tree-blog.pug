mixin table-tree-blog(items,level=1)
  each item, index in items
    - const prefix = Array(level+1).join("-- ") 
    tr
      td 
        input(
          type="checkbox"
          name="id"
          value=item.id
        )
      td= item.index
      td
        img(
          src=item.thumbnail
          alt=item.title
          width="100"
          height="auto"
          style="max-width: 100px; height: auto;"
        )
      td #{prefix}#{item.title}
      td 
        input(
          type="number"
          value=item.position 
          style="width: 60px;"
          min="1"
          name="position"
        )
      td
        if(role.permissions.includes("blog-category_edit"))
          if item.status === "active"
            a.badge.bg-success(
              href="javascript:;"
              data-status=item.status
              data-id=item.id
              button-change-status
            ) Hoạt động
          else 
            a.badge.bg-danger(
              href="javascript:;"
              data-status=item.status
              data-id=item.id
              button-change-status
            ) Dừng hoạt động
      td 
        div
          if(item.accountFullName)
            div #{item.accountFullName}
          else if(item.createdBy && item.createdBy.accountFullName)
            div #{item.createdBy.accountFullName}
          else
            div.text-muted Không có thông tin
            
          if(item.createdBy && item.createdBy.createdAt)
            small.text-muted.d-block.mt-1
              +formatDateTime(item.createdBy.createdAt)
      td
        if(item.lastEditBy)
          div
            div.fw-bold.text-primary #{item.lastEditBy}
            small.text-muted.d-block
              i.fas.fa-edit.me-1
              +formatDateTime(item.lastEditedAt)
            if(item.editedBy && item.editedBy > 1)
              small.badge.bg-info.text-white.mt-1
                i.fas.fa-history.me-1
                | #{item.editedBy} lần chỉnh sửa
        else
          div.text-muted.small
            i.fas.fa-minus-circle.me-1
            | Chưa chỉnh sửa
      td
       if(role.permissions.includes("blog-category_view"))
        a(
          href=`${prefixAdmin}/blog-category/detail-category/${item.id}`
          class="btn btn-secondary btn-sm"
        ) Chi tiết
        if(role.permissions.includes("blog-category_edit"))
          a(
            href=`${prefixAdmin}/blog-category/edit-category/${item.id}`
            class="btn btn-warning btn-sm"
          ) Sửa
        if(role.permissions.includes("blog-category_delete"))
          button.btn.btn-danger.btn-sm.ml-1(
            type="button"
            data-id=item.id
            button-delete
          ) Xóa
    
    if item.children && item.children.length > 0
      +table-tree-blog(item.children, level+1)